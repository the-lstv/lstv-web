server {
    # www. redirects are handled automatically by Akeno
    domains: "{beta,local,}.lstv.{space, localhost}", "do1l878my2ui3.{cloudfront.net, lstv.space}";
    canonical: "lstv.space";
    redirect_https;
    root: /static;
}

route (/favicon.ico) {
    to: ~/assets/image/favicon.svg;
}

route (
    "/robots.txt",
    "/sitemap.xml",
    "/assets/**"
) { to: "~/$url" }

location (/sign-up) {
    alias: "/login";
}

location (/pp) {
    alias: "/privacy-policy";
}

# Temporary solution
route (/~/api/**) { to: "/errors/plain.txt" }

errors {
    404: /errors/404.html;
    500: /errors/500.html;
}

handle (/ping) {
    as: "api.extragon.cloud";
    path: /v2/telemetry/session;
}

# Minimum browser version required
browserSupport {
    chrome: 88;
    firefox: 78;
}

# Redirect for Discord
redirect( /discord ) { to: "https://discord.gg/jQm9yGKCEC" }