#template /templates/main.html

<head>
    @use (/home/index.css, /home/index.js[defer]);
    @use (ls.js.ImageCropper:5.2.0);

    @page {
        title: "LSTV | User settings";
        description: "Manage your LSTV account settings, privacy, and preferences.";
        keywords: "LSTV, user settings, account management, preferences";
    }
</head>

<div .top>
    <div .width-container>
        <h1 .title>User Settings</h1>
        <button .menu-button .clear .square onclick="O('.menu').parentElement.toggleClass('sidebar-menu-visible')">
            <i .bi-list></i>
        </button>
    </div>
</div>

<div .container .width-container .level-0>
    <div .menu .sidebar-items .level-n1>
        <div .grouped-buttons>
            <a .ls-button .elevated href="/home" data-tab-id="home"><i .bi-house-fill /><span>Home</span></a>
        </div>

        <span .menu-category-title>Account</span>

        <div .grouped-buttons>
            <a .ls-button .elevated href="/home/account" data-tab-id="account"><i .bi-person-fill /><span>Account</span></a>
            <a .ls-button .elevated href="/home/profile" data-tab-id="profile"><i .bi-person-badge /><span>Profile</span></a>
        </div>

        <span .menu-category-title>Applications</span>
        <div .grouped-buttons>
            <a .ls-button .elevated href="/home/applications" data-tab-id="applications"><i .bi-app-indicator /><span>Authorized applications</span></a>
        </div>
        
        <span .menu-category-title>Developers</span>
        <div .grouped-buttons>
            <a .ls-button .elevated href="/home/apps" data-tab-id="apps"><i .bi-app /><span>My applications</span></a>
            <a .ls-button .elevated href="/home/sub-users" data-tab-id="sub-users"><i .bi-robot /><span>Bot accounts</span></a>
            <a .ls-button .elevated href="/home/keys" data-tab-id="keys"><i .bi-key-fill /><span>API Keys</span></a>
            <a .ls-button .elevated href="/home/api" data-tab-id="api"><i .bi-file-earmark-text /><span>API Documentation</span></a>
        </div>

        <span .menu-category-title>Help</span>
        <div .grouped-buttons>
            <a .ls-button .elevated href="/home/support" data-tab-id="support"><i .bi-bug-fill /><span>Report a bug</span></a>
            <a .ls-button .elevated href="/chat"><i .bi-chat-left-fill /><span>Write us</span></a>
            <a .ls-button .elevated target="_blank" href="/tos"><i .bi-shield-lock-fill /><span>Terms Of Service</span><i .bi-box-arrow-up-right .external-indicator /></a>
            <a .ls-button .elevated target="_blank" href="/privacy-policy"><i .bi-shield-lock /><span>Privacy Policy</span><i .bi-box-arrow-up-right .external-indicator /></a>
        </div>
    </div>

    <div .sidebar-content .ls-slide-animation>
        <ls-tab tab-id="home" tab-title="Home">
            <h1>Welcome, {{ user.displayname:DisplayName }}!</h1>
        </ls-tab>


        <ls-tab tab-id="account" tab-title="Account">
            <ls-div style="display: flex; align-items: center; gap: 16px; margin-bottom: 24px; margin-top: 0">
                <div {{ user.pfp:ProfilePicture(64px) }} style="height: 64px" />
                <div>
                    <h2 {{ user.displayname:DisplayName }} style="margin: 0; font-weight: 700" />
                    <a .ls-button .elevated href="/home/profile" style="padding: 2px 16px"><i .bi-pencil-fill /> Customize profile</a>
                </div>
            </ls-div>

            <hr>

            <ls-div .margin-v-xlarge>
                <h3>Change details</h3>
    
                <ls-div>
                    <label for="settings-username">Username</label> <br>
                    <input type="text" name="username" id="settings-username" {{ user.username }} placeholder="Username" autocomplete="username">
                </ls-div>
    
                <ls-div>
                    <label for="settings-email">Email</label> <br>
                    <input type="email" name="email" id="settings-email" {{ user.email }} placeholder="Email" autocomplete="email">
                </ls-div>

                <button .elevated #settings-save-changes>
                    <i .bi-check-lg /> Save changes
                </button>
            </ls-div>

            <hr>

            <ls-div .margin-v-xlarge>
                <h3>Password</h3>
                <button .ls-button .elevated #account-change-password>Change password</button>
            </ls-div>

            <hr>

            <ls-div .margin-v-xlarge>
                <h3>Delete Account</h3>
                You can disable your account temporarily and enable it later. <br> <br>
                <button ls-accent="red" disabled ls-tooltip="This option is currently unavailable." .ls-button .elevated>Disable Account</button>
                <button ls-accent="red" .ls-button>Delete Account</button>
            </ls-div>
        </ls-tab>


        <ls-tab tab-id="profile" tab-title="Profile" style="padding-bottom: 60px">
            <div .profile-editor-container>
                <div style="flex: 1">
                    <h2 style="margin-top: 0">Profile Editor <ls-box .inline .text-tag>Beta</ls-box></h2>
                    <p>Customize your profile with a banner, avatar, and display name.</p>

                    <ls-div .margin-v-xlarge>
                        <h3 for="profile-displayname" role="label">Display Name</h3>
                        <input type="text" name="displayname" #profile-displayname {{ editingUser.displayname }} placeholder="Display Name" autocomplete="name" maxlength="45" />
                    </ls-div>

                    <hr>

                    <ls-div .margin-v-xlarge>
                        <h3>Avatar</h3>
                        <input type="file" hidden name="avatar" #profile-avatar accept="image/*">
                        <label for="profile-avatar" .ls-button .elevated>
                            <i .bi-image></i> Change Avatar
                        </label>
                        <button .clear #profile-remove-avatar>Remove avatar</button>
                    </ls-div>

                    <hr>

                    <ls-div .margin-v-xlarge>
                        <h3>Profile Banner</h3>
                        <span .settings-subtext>Recommended size: 680x320 pixels</span>
                        <input type="file" hidden name="banner" #profile-banner accept="image/*">
                        <label for="profile-banner" .ls-button .elevated>
                            <i .bi-image></i> Change Banner
                        </label>
                        <button .clear #profile-remove-banner>Remove banner</button>
                    </ls-div>

                    <hr>

                    <ls-div .margin-v-xlarge>
                        <h3>About Me</h3>
                        <span .settings-subtext>You can use markdown and links.</span>
                        <ls-text-input .has-textarea>
                            <textarea name="about" #profile-about placeholder="Tell us about yourself..." maxlength="500" {{ editingUser.bio || '' }}></textarea>
                            <div .ls-text-input-label #profile-about-length></div>
                        </ls-text-input>
                    </ls-div>

                    <hr>

                    <ls-div .margin-v-xlarge>
                        <h3>Profile Links</h3>
                        <span .settings-subtext>Links to your social media or personal website.</span>
                        <div .ls-table-wrap style="max-width: 400px">
                            <table>
                                <thead><tr><th>Platform</th><th>Link</th></tr></thead>
                                <tbody #links></tbody>
                            </table>
                            <div role="caption" .ls-tfoot>
                                <button .square .clear ls-tooltip aria-label="Add Link" #add-link style="height: 24px"><i .bi-plus-lg /></button>
                                <button .square .clear ls-tooltip aria-label="Remove all" #clear-links style="height: 24px"><i .bi-trash-fill /></button>
                            </div>
                        </div>
                    </ls-div>

                    <hr>

                    <ls-div .margin-v-xlarge>
                        <h3>Mature Content</h3>
                        <span .settings-subtext>If your profile media or content contains mature content, you must check this. Your profile will be hidden from some people.</span>

                        <label .ls-checkbox>
                            <input type="checkbox" id="mature-content" name="mature-content" {{ editingUser.nsfw }}>
                            My profile contains mature content
                            <span />
                        </label>
                    </ls-div>
                </div>

                <div>
                    <div .profile .profile-block .level-1>
                        <div .profile-banner .editable {{ editingUser.banner:ProfileBanner }} />
                        <div .profile-avatar .editable {{ editingUser.pfp:ProfilePicture(120px) }} />
    
                        <div .profile-content>
                            <ls-box .contained .level-2 style="border-radius: var(--border-radius-large)">
                                <h2 {{ editingUser.displayname:DisplayName }} style="margin-bottom: 0; font-weight: 700" />
                                <span .profile-username>&#64;{{ editingUser.username }}</span>
                            </ls-box>
    
                            {{ editingUser.bio:ProfileBio(true) }}
                            {{ editingUser.profileLinks:ProfileLinks }}
                        </div>
                    </div>
    
                    <ls-div>
                        <button .pill .elevated onclick="this.parentElement.parentElement.children[0].setAttribute('ls-theme', 'light')"><i .bi-sun-fill /> Try light mode</button>
                        <button .pill .elevated onclick="this.parentElement.parentElement.children[0].setAttribute('ls-theme', 'dark')"><i .bi-moon-stars-fill /> Try dark mode</button>
                    </ls-div>
                </div>
            </div>
        </ls-tab>


        <ls-tab tab-id="applications" tab-title="Authorized Applications">D</ls-tab>
        <ls-tab tab-id="apps" tab-title="My Applications">E</ls-tab>
        <ls-tab tab-id="sub-users" tab-title="Bot Accounts">F</ls-tab>
        <ls-tab tab-id="keys" tab-title="API Keys">G</ls-tab>
        <ls-tab tab-id="api" tab-title="API Documentation">H</ls-tab>
        <ls-tab tab-id="support" tab-title="Support / Write us">I</ls-tab>
    </div>

    <div .profile-editor-confirm-buttons .level-1>
        <span>You have unsaved changes</span>

        <div>
            <button .elevated .pill #profile-reset>
                <i .bi-x-lg></i> Discard
            </button>
            <button .elevated .pill #profile-save ls-accent="green">
                <i .bi-check-lg></i> Save Changes
            </button>
        </div>
    </div>
</div>