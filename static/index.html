@no-init();

<ls-manifest title="Home" module="static.home" hidden></ls-manifest>

<style>
.full-height {
    height: 100%;
    position: relative;
}

.center-board {
    display: flex;
    align-items: center;
    justify-content: center;
}

#logo {
    width: 60vw;
    min-width: 120px;
    max-width: 300px;
    overflow: visible;
}

.logo-stripe {
    transform-origin: center;
    transform: scaleX(40);
    opacity: .1;
}

#chevron {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 16px;
    animation: jump 1.5s cubic-bezier(.7,0,.175,1) 250ms infinite alternate both;
    transition: opacity 0.2s;
    pointer-events: none;
    opacity: 0;
    background: var(--elevate-8);
    color: var(--bg);
    border-radius: var(--br-big);
    padding: 8px 20px;
    white-space: nowrap;
    z-index: 500;
}

#chevron.visible {
    opacity: 1;
}

@keyframes jump {
    0% {
        transform: translateY(0) translateX(-50%)
    }

    100% {
        transform: translateY(-10px) translateX(-50%)
    }
}

#footer {
    background-color: var(--elevate);
}

#footer {
    position: relative;
    min-height: 250px;
    padding: 30px 0;
    overflow: hidden;
    display: flex;
    align-items: center;
    flex-direction: column;
    justify-content: center;
}

.padding {
    padding: 3.5em;
    display: flex;
    align-items: center;
    flex-direction: column;
    position: relative;
}

.bga {
    border: 0;
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    opacity: .2;
    object-fit: cover;
}

h2 {
    margin: 0;
}

.guy-lore {
    display: flex;
    flex-wrap: wrap;
    gap: 4em;
    max-width: 60em;
}

.mono {
    font-family: 'JetBrains Mono';
}

.guy-lore > div {
    flex: 1;
    min-width: 65%;
    width: 100%;
    font-weight: 200;
}

@media screen and (max-width: 600px) {
    .padding {
        padding: 3em 2em;
    }

    #lore-illustration {
        width: 250px;
    }

    .marqueeBar span:nth-child(odd) {
        display: none;
    }
}

.appShowcaseWrap {
    display: flex;
    width: 100%;
    justify-content: center;
}

#searchBar {
    display: flex;
    justify-content: center;
    margin: 70px 0;
}

#apps-showcase {
    display: flex;
    gap: 40px;
    flex-wrap: wrap;
    max-width: 875px;
    justify-content: center;
}

.appItem {
    display: flex;
    width: 265px;
    --color-1: var(--elevate);
    --color-2: var(--elevate-1);
    background: radial-gradient(270% 160% at 69% 100%,var(--color-1) 0%,var(--color-2) 100%);
    border-radius: 15px;
    overflow: hidden;
    flex-direction: column;
    box-shadow: inset 0 0 0 1px #fff2, 0 9px 25px -11px #000;
    height: fit-content;
    color: var(--color-fg-light);
    cursor: pointer;

    outline: 0px solid;

    transition: .2s outline ease-in-out;
}


.appBody {
    padding: 30px 20px;
    text-align: center;
    font-weight: 300;
}

.appDescription {
    text-align: left;
    white-space: pre-wrap;
}

.appIconContainer {
    margin-bottom: 15px;
}

.appIconContainer img {
    width: 120px;
    /* border-radius: 8px; */
    clip-path: inset(0 round 15px);
    filter: opacity(1);  /* This fixes a weird rendering bug for whatever reason. */
}

.appName {
    font-size: 1.4em;
    display: block;
    margin-bottom: 10px;
}

.appTop {
    text-align: center;
    color: var(--color-fg);
    padding: 8px 0;
}

.appTop, .appBottom {
    background: var(--transparent-overlay);
}

.appBottom {
    display: flex;
    overflow-x: overlay;
    padding: 4px 8px;
}

.appTop span {
    letter-spacing: 1px;
    font-weight: 500;
    font-size: 1.2em;
    opacity: .9;
}

.appTag {
    background: var(--transparent-overlay);
    padding: 4px 12px !important;
    white-space: nowrap;
}

.appItemLight .appTag {
    background: var(--transparent-overlay-strong);
}

/* .appItemDark :is(.appBottom, .appTop) {
    background: #fff1;
} */

.appItemLight .appBottom {
    border-top: 1px solid var(--transparent-overlay-dark);
}

.appItemLight .appTop {
    border-bottom: 1px solid var(--transparent-overlay-dark);
}

.appItemLight {
    color: #111;
}

#cursorPopout {
    position: fixed;
    width: 60px;
    height: 60px;
    background: var(--color);
    color: var(--accent);
    top: 0;
    border-radius: 50%;
    transform: scale(.5) translate(-50%, -50%);
    opacity: 0;
    transition: transform .2s, opacity .2s, background .4s;
    z-index: 500;
    pointer-events: none;
    display: flex;
    justify-content: center;
    align-items: center;
}

#cursorPopout.active {
    transform: scale(1) translate(-50%, -50%);
    opacity: 1;
}

.marqueeBar {
    background: var(--elevate-5);
    color: var(--elevate);
    font-weight: 900;
    padding: 6px 0;
    width: 100%;
    font-size: larger;
    overflow: hidden;
}

.marqueeBar div {
    animation: marquee 8s linear infinite;
    white-space: nowrap;
    display: flex;
    width: 200%;
}

.marqueeBar span {
    float: left;
    width: 50%;
}

@keyframes marquee {
    0% {
        transform: translateX(0);
    }
    100% {
        transform: translateX(-50%);
    }
}

ls-box.inline.color {
    padding: 4px 12px;
}
</style>


<div .full-height .center-board>
    <svg %logo xmlns="http://www.w3.org/2000/svg" viewBox="0 0 111 124" fill="none"><path style="transform: translateX(calc(var(--scroll) / 25 * 1px))" fill="#ed6c30" d="M0 16h111v14H0z"/><path class="logo-stripe" fill="#ed6c30" d="M0 16h111v14H0z"/><path fill="#fcc21b" d="M0 35h111v15H0z"/><path class="logo-stripe" fill="#fcc21b" d="M0 35h111v15H0z"/><path style="transform: translateX(calc(var(--scroll) / 25 * -1px))" fill="#40c0e7" d="M0 55h111v14H0z"/><path class="logo-stripe" fill="#40c0e7" d="M0 55h111v14H0z"/><path d="M10.9 118v-14.6h3v11.8h5.9v2.8h-8.9zm31.092.2c-1.027 0-1.92-.173-2.68-.52s-1.347-.833-1.76-1.46-.62-1.367-.62-2.22h3c0 .493.187.887.56 1.18.387.28.907.42 1.56.42.627 0 1.113-.14 1.46-.42.36-.28.54-.667.54-1.16a1.62 1.62 0 0 0-.4-1.1c-.267-.307-.64-.513-1.12-.62l-1.48-.34c-1.24-.293-2.207-.833-2.9-1.62-.68-.8-1.02-1.773-1.02-2.92 0-.853.193-1.593.58-2.22.4-.64.96-1.133 1.68-1.48s1.573-.52 2.56-.52c1.493 0 2.673.373 3.54 1.12.88.733 1.32 1.727 1.32 2.98h-3c0-.467-.167-.833-.5-1.1-.32-.267-.787-.4-1.4-.4-.573 0-1.013.133-1.32.4-.307.253-.46.62-.46 1.1a1.73 1.73 0 0 0 .36 1.1c.253.293.607.493 1.06.6l1.56.36c1.293.293 2.273.827 2.94 1.6.667.76 1 1.733 1 2.92 0 .853-.213 1.607-.64 2.26-.413.653-1 1.16-1.76 1.52-.747.36-1.633.54-2.66.54zm25.492-.2v-11.8h-3.7v-2.8h10.4v2.8h-3.7V118h-3zm26.612 0l-3.62-14.6h3.1l2.02 9.22.24 1.22.24 1.26.2-1.26.22-1.24 1.96-9.2h3.02l-3.58 14.6h-3.8zM56 0l43.301 75H12.699L56 0z" fill="var(--color)"/></svg>
    
    <canvas %raysBga style="object-position: bottom center; opacity: .2; z-index: -1" .bga></canvas>
    
    <div %chevron .visible .mono><i class="bi-chevron-down"></i> Scroll down <i class="bi-chevron-down"></i></div>
</div>

<div style="background: var(--elevate)">
    <div .marqueeBar .mono>
        <div>
            <span>SUCK AT WHAT YOU DO? JUST  DO IT MORE</span>
            <span>SUCK AT WHAT YOU DO? JUST  DO IT MORE</span>
            <span>SUCK AT WHAT YOU DO? JUST  DO IT MORE</span>
            <span>SUCK AT WHAT YOU DO? JUST  DO IT MORE</span>
        </div>
    </div>

    <div .padding>
        <canvas %glCanvas .bga></canvas>

        <br><br><br><br>
        
        <svg %lore-illustration width="350" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 893 421" fill="none"><rect x="447" width="446" height="370" rx="30" fill="#2c2c2c"/><path d="M627.2 308.64c-3.285 0-6.144-.555-8.576-1.664s-4.309-2.667-5.632-4.672-1.984-4.373-1.984-7.104h9.6c0 1.579.597 2.837 1.792 3.776 1.237.896 2.901 1.344 4.992 1.344 2.005 0 3.563-.448 4.672-1.344 1.152-.896 1.728-2.133 1.728-3.712 0-1.365-.427-2.539-1.28-3.52s-2.048-1.643-3.584-1.984l-4.736-1.088c-3.968-.939-7.061-2.667-9.28-5.184-2.176-2.56-3.264-5.675-3.264-9.344 0-2.731.619-5.099 1.856-7.104 1.28-2.048 3.072-3.627 5.376-4.736s5.035-1.664 8.192-1.664c4.779 0 8.555 1.195 11.328 3.584 2.816 2.347 4.224 5.525 4.224 9.536h-9.6c0-1.493-.533-2.667-1.6-3.52-1.024-.853-2.517-1.28-4.48-1.28-1.835 0-3.243.427-4.224 1.28-.981.811-1.472 1.984-1.472 3.52 0 1.365.384 2.539 1.152 3.52.811.939 1.941 1.579 3.392 1.92l4.992 1.152c4.139.939 7.275 2.645 9.408 5.12 2.133 2.432 3.2 5.547 3.2 9.344 0 2.731-.683 5.141-2.048 7.232-1.323 2.091-3.2 3.712-5.632 4.864-2.389 1.152-5.227 1.728-8.512 1.728zm44.775 0c-3.115 0-5.824-.576-8.128-1.728-2.304-1.195-4.096-2.837-5.376-4.928-1.237-2.133-1.856-4.608-1.856-7.424v-8.32c0-2.816.619-5.269 1.856-7.36 1.28-2.133 3.072-3.776 5.376-4.928 2.304-1.195 5.013-1.792 8.128-1.792 3.157 0 5.867.597 8.128 1.792 2.304 1.152 4.075 2.795 5.312 4.928 1.28 2.091 1.92 4.544 1.92 7.36v8.32c0 2.816-.64 5.291-1.92 7.424-1.237 2.091-3.008 3.733-5.312 4.928-2.261 1.152-4.971 1.728-8.128 1.728zm0-8.32c1.877 0 3.307-.491 4.288-1.472.981-1.024 1.472-2.453 1.472-4.288v-8.32c0-1.877-.491-3.307-1.472-4.288s-2.411-1.472-4.288-1.472c-1.835 0-3.264.491-4.288 1.472-.981.981-1.472 2.411-1.472 4.288v8.32c0 1.835.491 3.264 1.472 4.288 1.024.981 2.453 1.472 4.288 1.472zm44.775 8.32c-4.736 0-8.448-1.28-11.136-3.84-2.645-2.56-3.968-6.059-3.968-10.496V272.8h9.6v21.44c0 1.963.469 3.477 1.408 4.544.939 1.024 2.304 1.536 4.096 1.536 1.749 0 3.093-.512 4.032-1.536.981-1.067 1.472-2.581 1.472-4.544V272.8h9.6v21.504c0 4.48-1.344 8-4.032 10.56-2.688 2.517-6.379 3.776-11.072 3.776zm29.799-.64v-35.2h9.28v6.72h2.816l-2.816 2.24c0-2.987.853-5.333 2.56-7.04s4.011-2.56 6.912-2.56c3.413 0 6.144 1.195 8.192 3.584 2.091 2.389 3.136 5.568 3.136 9.536V308h-9.6v-21.76c0-1.835-.491-3.243-1.472-4.224-.939-1.024-2.283-1.536-4.032-1.536-1.707 0-3.029.512-3.968 1.536-.939.981-1.408 2.389-1.408 4.224V308h-9.6zm56.103.64c-3.541 0-6.379-1.237-8.512-3.712s-3.2-5.824-3.2-10.048v-8.96c0-4.181 1.067-7.509 3.2-9.984 2.133-2.517 4.971-3.776 8.512-3.776 2.901 0 5.184.853 6.848 2.56 1.664 1.664 2.496 4.011 2.496 7.04l-2.24-2.24h2.24l-.32-8.64v-9.6h9.6V308h-9.28v-6.72h-2.24l2.24-2.24c0 3.029-.832 5.397-2.496 7.104-1.664 1.664-3.947 2.496-6.848 2.496zm3.456-8.32c1.749 0 3.115-.491 4.096-1.472.981-1.024 1.472-2.453 1.472-4.288v-8.32c0-1.835-.491-3.243-1.472-4.224-.981-1.024-2.347-1.536-4.096-1.536-1.792 0-3.179.512-4.16 1.536-.939.981-1.408 2.389-1.408 4.224v8.32c0 1.835.469 3.264 1.408 4.288.981.981 2.368 1.472 4.16 1.472z" fill="#f9cdb9"/><path d="M609.6 108l11.456-46.72h12.16L644.8 108h-9.792l-2.24-10.56h-11.136l-2.24 10.56H609.6zm13.632-18.24h7.872l-2.24-11.264-.96-4.8-.704-3.776-.704 3.712-.896 4.8-2.368 11.328zM658.023 108V72.8h8.96v6.72h2.432l-2.752 4.096c0-3.797.875-6.656 2.624-8.576s4.309-2.88 7.68-2.88c3.883 0 6.891 1.173 9.024 3.52 2.176 2.347 3.264 5.653 3.264 9.92v2.88h-10.24v-2.24c0-1.92-.533-3.413-1.6-4.48-1.024-1.067-2.411-1.6-4.16-1.6-1.835 0-3.243.533-4.224 1.6-.939 1.067-1.408 2.56-1.408 4.48V108h-9.6zm62.567 0c-3.584 0-6.4-1.024-8.448-3.072s-3.072-4.864-3.072-8.448V81.44h-9.28V72.8h9.28v-9.92h9.6v9.92h13.12v8.64h-13.12v15.04c0 1.92.96 2.88 2.88 2.88h9.6V108h-10.56z" fill="#feebb3"/><path d="M627.456 208.64c-3.115 0-5.845-.576-8.192-1.728-2.347-1.195-4.181-2.837-5.504-4.928-1.28-2.133-1.92-4.608-1.92-7.424v-19.84c0-2.859.64-5.333 1.92-7.424 1.323-2.091 3.157-3.712 5.504-4.864 2.347-1.195 5.077-1.792 8.192-1.792 3.157 0 5.888.597 8.192 1.792 2.347 1.152 4.16 2.773 5.44 4.864 1.323 2.091 1.984 4.565 1.984 7.424h-9.6c0-1.877-.533-3.307-1.6-4.288-1.024-.981-2.496-1.472-4.416-1.472s-3.413.491-4.48 1.472c-1.024.981-1.536 2.411-1.536 4.288v19.84c0 1.835.512 3.264 1.536 4.288 1.067.981 2.56 1.472 4.48 1.472s3.392-.491 4.416-1.472c1.067-1.024 1.6-2.453 1.6-4.288h9.6c0 2.816-.661 5.291-1.984 7.424-1.28 2.091-3.093 3.733-5.44 4.928-2.304 1.152-5.035 1.728-8.192 1.728zm44.519 0c-3.115 0-5.824-.576-8.128-1.728-2.304-1.195-4.096-2.837-5.376-4.928-1.237-2.133-1.856-4.608-1.856-7.424v-8.32c0-2.816.619-5.269 1.856-7.36 1.28-2.133 3.072-3.776 5.376-4.928 2.304-1.195 5.013-1.792 8.128-1.792 3.157 0 5.867.597 8.128 1.792 2.304 1.152 4.075 2.795 5.312 4.928 1.28 2.091 1.92 4.544 1.92 7.36v8.32c0 2.816-.64 5.291-1.92 7.424-1.237 2.091-3.008 3.733-5.312 4.928-2.261 1.152-4.971 1.728-8.128 1.728zm0-8.32c1.877 0 3.307-.491 4.288-1.472.981-1.024 1.472-2.453 1.472-4.288v-8.32c0-1.877-.491-3.307-1.472-4.288s-2.411-1.472-4.288-1.472c-1.835 0-3.264.491-4.288 1.472-.981.981-1.472 2.411-1.472 4.288v8.32c0 1.835.491 3.264 1.472 4.288 1.024.981 2.453 1.472 4.288 1.472zm41.127 8.32c-3.541 0-6.379-1.237-8.512-3.712s-3.2-5.824-3.2-10.048v-8.96c0-4.181 1.067-7.509 3.2-9.984 2.133-2.517 4.971-3.776 8.512-3.776 2.901 0 5.184.853 6.848 2.56 1.664 1.664 2.496 4.011 2.496 7.04l-2.24-2.24h2.24l-.32-8.64v-9.6h9.6V208h-9.28v-6.72h-2.24l2.24-2.24c0 3.029-.832 5.397-2.496 7.104-1.664 1.664-3.947 2.496-6.848 2.496zm3.456-8.32c1.749 0 3.115-.491 4.096-1.472.981-1.024 1.472-2.453 1.472-4.288v-8.32c0-1.835-.491-3.243-1.472-4.224-.981-1.024-2.347-1.536-4.096-1.536-1.792 0-3.179.512-4.16 1.536-.939.981-1.408 2.389-1.408 4.224v8.32c0 1.835.469 3.264 1.408 4.288.981.981 2.368 1.472 4.16 1.472zm45.031 8.32c-3.115 0-5.845-.576-8.192-1.728-2.304-1.195-4.096-2.837-5.376-4.928-1.237-2.133-1.856-4.608-1.856-7.424v-8.32c0-2.816.619-5.269 1.856-7.36 1.28-2.133 3.072-3.776 5.376-4.928 2.347-1.195 5.077-1.792 8.192-1.792s5.803.597 8.064 1.792c2.304 1.152 4.075 2.795 5.312 4.928 1.28 2.091 1.92 4.544 1.92 7.36v6.4h-21.568v1.92c0 2.219.533 3.904 1.6 5.056 1.067 1.109 2.667 1.664 4.8 1.664 1.493 0 2.688-.256 3.584-.768.939-.512 1.557-1.216 1.856-2.112h9.408c-.768 3.072-2.517 5.547-5.248 7.424-2.688 1.877-5.931 2.816-9.728 2.816zm6.144-20.928v-1.6c0-2.176-.512-3.84-1.536-4.992-.981-1.152-2.517-1.728-4.608-1.728s-3.669.597-4.736 1.792c-1.024 1.195-1.536 2.88-1.536 5.056v.96l13.056-.128-.64.64z" fill="#bbe9f6"/><path d="M201.604 52H390l9 19h147v29H399l-9 22H241.741l-40.137-70z" fill="#fcc21b"/><path d="M256.075 147H390l9 24h147v29H399l-9 22h-90.921l-43.004-75z" fill="#40c0e7"/><path d="M313.413 247H390l9 24h147v29H399l-9 17h-36.45l-40.137-70z" fill="#ed6c30"/><path d="M62.417 292L175 97l112.583 195H62.417z" stroke="var(--color)" stroke-width="45"/><g stroke-width="13"><circle cx="30" cy="30" r="36.5" transform="matrix(1 0 0 -1 513 115)" fill="#fcc21b" stroke="#6e6035"/><circle cx="30" cy="30" r="36.5" transform="matrix(1 0 0 -1 513 215)" fill="#40c0e7" stroke="#35616e"/><circle cx="30" cy="30" r="36.5" transform="matrix(1 0 0 -1 513 315)" fill="#ed6c30" stroke="#6e4735"/></g><path d="M94.08 402v-46.72h9.6v37.76h18.88V402H94.08zm57.895.64c-3.285 0-6.144-.555-8.576-1.664s-4.309-2.667-5.632-4.672-1.984-4.373-1.984-7.104h9.6c0 1.579.597 2.837 1.792 3.776 1.237.896 2.901 1.344 4.992 1.344 2.005 0 3.563-.448 4.672-1.344 1.152-.896 1.728-2.133 1.728-3.712 0-1.365-.427-2.539-1.28-3.52s-2.048-1.643-3.584-1.984l-4.736-1.088c-3.968-.939-7.061-2.667-9.28-5.184-2.176-2.56-3.264-5.675-3.264-9.344 0-2.731.619-5.099 1.856-7.104 1.28-2.048 3.072-3.627 5.376-4.736s5.035-1.664 8.192-1.664c4.779 0 8.555 1.195 11.328 3.584 2.816 2.347 4.224 5.525 4.224 9.536h-9.6c0-1.493-.533-2.667-1.6-3.52-1.024-.853-2.517-1.28-4.48-1.28-1.835 0-3.243.427-4.224 1.28-.981.811-1.472 1.984-1.472 3.52 0 1.365.384 2.539 1.152 3.52.811.939 1.941 1.579 3.392 1.92l4.992 1.152c4.139.939 7.275 2.645 9.408 5.12 2.133 2.432 3.2 5.547 3.2 9.344 0 2.731-.683 5.141-2.048 7.232-1.323 2.091-3.2 3.712-5.632 4.864-2.389 1.152-5.227 1.728-8.512 1.728zm39.975-.64v-37.76h-11.84v-8.96h33.28v8.96h-11.84V402h-9.6zm43.559 0l-11.584-46.72h9.92l6.464 29.504.768 3.904c.341 1.579.597 2.923.768 4.032l.64-4.032.704-3.968 6.272-29.44h9.664L247.669 402h-12.16z" fill="var(--color)"/></svg>

        <br><br>
        
        <div .guy-lore .mono .padding>
            <div style="z-index: 5">
                <h1>Who am I?</h1>
                My name is <b>Lukáš / Lukas</b>.<br>
                I am a current student in IT, with about 8 years of coding experience and 4 years of design experience, self-taught. (More information on my <a href="https://github.com/the-lstv">Github profile</a>).<br>
                <br>
                I learn with experience. I think that over-preparing is a bad way to reach your goal - just head right in and find your path along the way. You can always refine later.<br>
                <br><br>
                I design and develop software, do sound design, and develop games. Anything from networking, hardware, libraries and utility to creative software that helps with my other areas of interest - video editing, sound composition and design, writing, you name it.<br>
                My current main areas of expertise in development are optimization, design and graphics/rendering software and networking software.
                <br><br>
                
                <h1>What's "LSTV"?</h1>
                LSTV is a community of developers, artists and producers (or just about anyone - you included :D), aiming to provide an open, universal environment as to create awesome high-quality projects.<br><br>
                <b>Please note:</b> This is a common confusion - Lukas (me, the person) is not <i>called</i> "LSTV" - LSTV is not my nickname. To refer to me, the person behind LSTV, please use my name (Lukas) or one of my aliases. LSTV refers to our community and its projects.
                <br><br><br>

                <div style="text-align: center">
                    <a href="https://discord.gg/XyP8aHry4c" target="_blank" .ls-button ls-accent="black" style="padding: 12px 45px; display: inline-flex; align-items: center; border-radius: 100px">
                        <i .bi-discord style="font-size: xx-large; margin-right: 20px; display: inline-block"></i>
                        Join our Discord server!
                    </a>
                </div>

                <br><br>
            </div>
        </div>
    </div>

    <div .marqueeBar .mono>
        <div>
            <span>SUCK AT WHAT YOU DO? JUST  DO IT MORE</span>
            <span>SUCK AT WHAT YOU DO? JUST  DO IT MORE</span>
            <span>SUCK AT WHAT YOU DO? JUST  DO IT MORE</span>
            <span>SUCK AT WHAT YOU DO? JUST  DO IT MORE</span>
        </div>
    </div>
</div>

<div style="position: relative">

    
    <div .appShowcaseBackground>
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="428" height="269" fill="none"><path d="M320.594 190.949c2.845-3.133 6.097-5.87 9.671-8.136a23.1 23.1 0 0 0-4.346-.809c-2.946-.221-4.238.479-4.789 1.03s-1.247 1.839-1.03 4.789c.077.943.237 1.988.494 3.126zm79.324 42.458l.911 1.885c2.451 5.252 4.073 10.391 4.423 15.005.345 4.589-.545 9.373-4.016 12.843s-8.255 4.362-12.848 4.017c-4.017-.309-8.43-1.576-12.977-3.517h-.016c-.799-.34-1.592-.696-2.379-1.066-10.469-4.954-22.446-13.667-33.688-24.913-11.231-11.232-19.939-23.199-24.898-33.658a79.46 79.46 0 0 1-1.076-2.384l.005-.01c-1.952-4.558-3.224-8.986-3.527-13.013-.351-4.594.54-9.372 4.016-12.848 3.466-3.471 8.25-4.362 12.843-4.017 4.614.35 9.743 1.972 15.001 4.429a57.86 57.86 0 0 1 1.921.927 46.32 46.32 0 0 1 23.678.246 46.33 46.33 0 0 1 20.463 11.917 46.32 46.32 0 0 1 11.921 20.47 46.33 46.33 0 0 1 .243 23.687zm-5.732 13.353a46.54 46.54 0 0 1-8.116 9.635c1.123.257 2.158.422 3.09.489 2.951.226 4.243-.474 4.789-1.03.556-.546 1.257-1.839 1.03-4.789a22.97 22.97 0 0 0-.793-4.305zm-71.975 8.033a46.31 46.31 0 0 1-11.751-19.874c-2.177-7.511-2.416-15.45-.695-23.078 5.571 10.196 13.929 21.113 24.099 31.283 10.181 10.181 21.103 18.539 31.31 24.115-7.63 1.723-15.571 1.485-23.084-.692a46.3 46.3 0 0 1-19.879-11.754z" fill="url(#A)" fill-opacity=".09"/><path d="M127.846 137.448l-4.733 1.997-.066.034c-3.242 1.397-6.956 2.995-11.01 4.486-8.161 3.022-17.925 5.724-28.769 5.724-12.068 0-21.32-3.235-28.735-6.789-2.862-1.371-5.518-2.829-7.854-4.107l-1.811-.999c-2.862-1.544-5.085-2.655-7.069-3.281a109.22 109.22 0 0 0-23.896-4.506 105.81 105.81 0 0 0-9.672-.32l-.513.02h-.14l-1.012.053c3.801 13.221 11.602 24.94 22.332 33.548a66.59 66.59 0 0 0 37.593 14.524c13.73.843 27.385-2.587 39.086-9.818a66.6 66.6 0 0 0 26.267-30.566zM8.239 79.319l1.977 2.01.02.027.126.12.572.539a54.87 54.87 0 0 0 2.396 2.063c2.13 1.731 5.292 4.06 9.346 6.39 8.114 4.686 19.629 9.292 33.481 9.292 9.146 0 16.148-2.623 22.086-5.724 2.363-1.238 4.493-2.51 6.61-3.774l1.831-1.085c2.609-1.544 5.392-3.115 8.214-4.087a99 99 0 0 1 22.572-4.946c2.555-.247 5.121-.363 7.688-.346a66.55 66.55 0 0 0-58.589-34.952A66.55 66.55 0 0 0 8.239 79.319z" fill="url(#B)" fill-opacity=".09"/><path opacity=".5" d="M131.63 125.504c1.001-4.633 1.503-9.359 1.498-14.098a66.49 66.49 0 0 0-3.495-21.34l-3.507-.253h-.074l-.339-.02a64.91 64.91 0 0 0-7.295.286 89.05 89.05 0 0 0-20.282 4.46c-1.751.599-3.748 1.677-6.377 3.228l-1.651.985c-2.143 1.285-4.593 2.749-7.242 4.127-6.856 3.588-15.463 6.863-26.705 6.863-16.095 0-29.334-5.345-38.473-10.624a82.14 82.14 0 0 1-10.65-7.295 62.07 62.07 0 0 1-3.195-2.762C.354 98.931-.781 109.479.528 119.866l2.563-.133h.073l.18-.007a57.53 57.53 0 0 1 2.995-.04c2.017.014 4.879.093 8.34.366 6.903.533 16.288 1.844 26.113 4.939 2.995.939 5.984 2.483 8.833 4.027l1.99 1.085c2.303 1.265 4.639 2.55 7.235 3.794 6.523 3.129 14.271 5.798 24.415 5.798 9.206 0 17.719-2.29 25.307-5.099 3.801-1.397 7.315-2.915 10.59-4.326l.12-.047c3.162-1.358 6.237-2.682 8.939-3.581l3.408-1.138z" fill="url(#C)" fill-opacity=".09"/><path fill-rule="evenodd" d="M337.481 44.846C337.481 20.078 357.559 0 382.328 0a44.63 44.63 0 0 1 25.647 8.054 30.28 30.28 0 0 0-6.19 13.981c-.834 5.113-.341 10.355 1.43 15.223a30.28 30.28 0 0 0 22.412 19.32c-5.158 19.078-22.594 33.114-43.299 33.114a45.21 45.21 0 0 1-8.378-.78 30.27 30.27 0 0 0 2.477-17.003 30.28 30.28 0 0 0-7.178-15.612 30.27 30.27 0 0 0-31.7-8.998 45.61 45.61 0 0 1-.068-2.453zm62.785 17.938c0 1.189-.472 2.33-1.313 3.171s-1.982 1.314-3.171 1.314-2.33-.473-3.172-1.314-1.313-1.982-1.313-3.171.472-2.33 1.313-3.171 1.982-1.314 3.172-1.314 2.33.472 3.171 1.314 1.313 1.982 1.313 3.171zm-24.665-22.423c2.973 0 5.825-1.181 7.928-3.284s3.283-4.954 3.283-7.928-1.181-5.825-3.283-7.928-4.955-3.284-7.928-3.284a11.21 11.21 0 0 0-11.212 11.212 11.21 11.21 0 0 0 11.212 11.212z" fill="url(#D)" fill-opacity=".09"/><path d="M408.114 26.908c0-5.521 1.897-10.588 5.072-14.602 5.056 4.779 8.927 10.672 11.305 17.21s3.199 13.541 2.395 20.452c-5.303-1.099-10.066-3.993-13.485-8.193a23.55 23.55 0 0 1-5.287-14.867zm-40.775 60.22c-7.241-2.575-13.701-6.965-18.762-12.751s-8.552-12.772-10.141-20.292l.498-.166c4.41-1.488 9.162-1.636 13.655-.425a23.55 23.55 0 0 1 11.593 7.23c3.064 3.503 5.022 7.835 5.626 12.45s-.175 9.305-2.235 13.478l-.234.475z" fill="url(#E)" fill-opacity=".09"/><defs><linearGradient id="A" x1="356.976" y1="171.662" x2="356.976" y2="268.376" xlink:href="#F"><stop stop-color="#fff"/><stop offset="1" stop-color="#fff" stop-opacity="0"/></linearGradient><linearGradient id="B" x1="65.207" y1="44.846" x2="65.207" y2="177.957" xlink:href="#F"><stop stop-color="#fff"/><stop offset="1" stop-color="#fff" stop-opacity="0"/></linearGradient><linearGradient id="C" x1="66.564" y1="89.061" x2="66.564" y2="139.695" xlink:href="#F"><stop stop-color="#fff"/><stop offset="1" stop-color="#fff" stop-opacity="0"/></linearGradient><linearGradient id="D" x1="381.554" y1="0" x2="381.554" y2="89.693" xlink:href="#F"><stop stop-color="#fff"/><stop offset="1" stop-color="#fff" stop-opacity="0"/></linearGradient><linearGradient id="E" x1="382.811" y1="12.306" x2="382.811" y2="87.128" xlink:href="#F"><stop stop-color="#fff"/><stop offset="1" stop-color="#fff" stop-opacity="0"/></linearGradient><linearGradient id="F" gradientUnits="userSpaceOnUse"/></defs></svg>
    </div>
    
    <div style="position: relative">
        <h1 style="text-align: center;"><i class="bi-cone-striped"></i> Work in progress</h1>

        <div %cursorPopout>
            <i class="bi-box-arrow-up-right"></i>
        </div>
    
        <div %searchBar>
            <input type="text" placeholder="Search" %searchInput>
        </div>

        <div .appShowcaseWrap>
            <div %apps-showcase></div>
        </div>
    </div>

    <style>
        .appShowcaseBackground {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            justify-content: center;
            z-index: 0;
            overflow: hidden;
        }

        .appShowcaseBackground svg {
            will-change: transform;
        }
    </style>
</div>

<h3 style="text-align: center; color: var(--color); padding: 10px;">
    <br>
    ... And <b>hundereds</b> more!<br>
    Bare with me as I complete this website and add the rest of my projects (there are LOTS of them).
    <br><br>
</h3>

<div %footer>

    <svg style="width: 300px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 290 95" fill="none"><path d="M101.84 73V20.44h10.8v42.48h21.24V73h-32.04zm65.132.72c-3.696 0-6.912-.624-9.648-1.872s-4.848-3-6.336-5.256-2.232-4.92-2.232-7.992h10.8c0 1.776.672 3.192 2.016 4.248 1.392 1.008 3.264 1.512 5.616 1.512 2.256 0 4.008-.504 5.256-1.512 1.296-1.008 1.944-2.4 1.944-4.176 0-1.536-.48-2.856-1.44-3.96s-2.304-1.848-4.032-2.232l-5.328-1.224c-4.464-1.056-7.944-3-10.44-5.832-2.448-2.88-3.672-6.384-3.672-10.512 0-3.072.696-5.736 2.088-7.992 1.44-2.304 3.456-4.08 6.048-5.328s5.664-1.872 9.216-1.872c5.376 0 9.624 1.344 12.744 4.032 3.168 2.64 4.752 6.216 4.752 10.728h-10.8c0-1.68-.6-3-1.8-3.96-1.152-.96-2.832-1.44-5.04-1.44-2.064 0-3.648.48-4.752 1.44-1.104.912-1.656 2.232-1.656 3.96 0 1.536.432 2.856 1.296 3.96.912 1.056 2.184 1.776 3.816 2.16l5.616 1.296c4.656 1.056 8.184 2.976 10.584 5.76 2.4 2.736 3.6 6.24 3.6 10.512 0 3.072-.768 5.784-2.304 8.136-1.488 2.352-3.6 4.176-6.336 5.472-2.688 1.296-5.88 1.944-9.576 1.944zm44.972-.72V30.52h-13.32V20.44h37.44v10.08h-13.32V73h-10.8zm49.004 0l-13.032-52.56h11.16l7.272 33.192.864 4.392c.384 1.776.672 3.288.864 4.536l.72-4.536.792-4.464 7.056-33.12h10.872L274.628 73h-13.68z" fill="url(#TC)"/><path d="M40.321 20H78v14H48.348l-8.027-14z" fill="#ed6c30"/><path d="M51.215 39H78v15H59.816l-8.601-15z" fill="#fcc21b"/><path d="M62.683 59H78v14h-7.29l-8.027-14z" fill="#40c0e7"/><path d="M12.483 68L35 29l22.517 39H12.483z" stroke="var(--color)" stroke-width="9"/><defs><linearGradient id="TC" x1="95" y1="-48.5" x2="279.5" y2="63.5" gradientUnits="userSpaceOnUse"><stop stop-color="#fcc21b"/><stop offset=".465" stop-color="#fcc21b"/><stop offset=".465" stop-color="#ed6c30"/><stop offset=".725" stop-color="#ed6c30"/><stop offset=".725" stop-color="#40c0e7"/></linearGradient></defs></svg>

    <div ls-accent="auto" style="line-height: 1.6em; text-align: center">
        <a href="/tos">Terms of Service</a> · <a href="/pp">Privacy Policy</a> <br>
        <a style="font-weight: 100" href="https://github.com/the-lstv/lstv-web"><i class="bi-github"></i> Website GitHub</a>
    </div>

</div>

<script>
    let bgaSpeedFactor = .001, cloudsCanvas = O("#glCanvas"), raysCanvas = O("#raysBga"), cloudsRenderer, raysRenderer;

    app.module("static.home", (app, source, container) => {

        let initialLoadApps = false, appsBottom = Infinity, appsOffset = 0, appsAtBottom = false, cursorPopout = container.get("#cursorPopout");

        let customOrder = [2, 3, 4, 5, 10, 1, 8, 9, 7, 31, 11, 6],
            customBackOrder = [36, 27, 28, 29, 15, 26],
            customGroups = [
                [13, 19, 14]
            ],

            customColor = {
                7: ["#fff", "#eee", "#222"],
                16: ["#fff", "#eee", "#222"],
                13: ["#155676", "#030405", "#8fd2ff"],
                22: ["#ffffff", "#fbb8ff", "#320c35"],
                23: [null, null, "#fff"],
                28: [null, null, "#fff"],
                5: "#004ba6",
                10: "#0a0822",
                1: "#07436d",
                8: ["#ffe50e", "#c77c00", "#222"]
            },

            allTags = new Set
        ;

        let lastScroll = 0;
        const svgElement = document.querySelector('.appShowcaseBackground svg');

        container.on("scroll", () => {
            let scroll = container.scrollTop;

            if (Math.abs(scroll - lastScroll) > 10) {
                container.get("#chevron").class("visible", scroll < 60)

                if(!initialLoadApps && scroll > 600) {
                    initialLoadApps = true
                    loadApps()
                }

                if(cloudsCanvas.isInView()){
                    cloudsRenderer.resume()
                } else cloudsRenderer.paused = true;

                if(raysCanvas.isInView()){
                    raysRenderer.resume()
                } else raysRenderer.paused = true;
                
                window.requestAnimationFrame(() => {
                    svgElement.style.transform = `translateY(${(scroll - 1000) / 2}px) scale(${(scroll + 1000) / 2000}) rotate(${(scroll - 2500) / 100}deg)`;
                })

                lastScroll = scroll;
            }

            // if(!appsAtBottom && scroll > (container.scrollHeight - innerHeight - 100)) {
            //     appsOffset++
            //     loadApps()
            // }
        })

        if(!localStorage["ls.visited"]){
            LS.Toast.show("Warning: This site is in beta. <a href='https://lstv.space:8443'>Visit the legacy site</a>", {accent: "lstv-red", timeout: 2000})
            localStorage["ls.visited"] = true
        }


        let appsPageSize = 100;

        function customSort(arr) {
            // Create a map for quick lookup of customOrder positions
            const customOrderMap = new Map(customOrder.map((id, index) => [id, index]));
            
            // Sort function
            arr.sort((a, b) => {
                // First, handle customBackOrder by placing those IDs at the end
                const aInBackOrder = customBackOrder.indexOf(a.id) !== -1;
                const bInBackOrder = customBackOrder.indexOf(b.id) !== -1;
                
                if (aInBackOrder && !bInBackOrder) return 1;
                if (!aInBackOrder && bInBackOrder) return -1;
                if (aInBackOrder && bInBackOrder) return customBackOrder.indexOf(a.id) - customBackOrder.indexOf(b.id);
                
                // Then, handle customOrder
                const aOrder = customOrderMap.has(a.id) ? customOrderMap.get(a.id) : customOrder.length;
                const bOrder = customOrderMap.has(b.id) ? customOrderMap.get(b.id) : customOrder.length;
                
                if (aOrder !== bOrder) return aOrder - bOrder;
                
                // Finally, handle customGroups
                for (let group of customGroups) {
                    const aInGroup = group.findIndex(item => item === a.id);
                    const bInGroup = group.findIndex(item => item === b.id);
                    
                    if (aInGroup !== -1 && bInGroup !== -1) {
                        return aInGroup - bInGroup;
                    }
                    if (aInGroup !== -1) return -1;
                    if (bInGroup !== -1) return 1;
                }
                
                // Fallback to natural order by ID if none of the above applied
                return a.id - b.id;
            });
        }

        let types = ["Application", "Application", "Game", "Service", "Authentication", "Utility", "Website", "Finance"], list, elements = {};

        async function loadApps(limit = appsPageSize, offset = (appsOffset * appsPageSize)) {
            list = await app.get(`${app.api}/v2/apps/list/home?limit=${limit}&offset=${offset}`).json()

            if(list.length < limit) appsAtBottom = true;

            customSort(list)

            drawApps()
        }

        function drawApps(filter){
            for(let item of list){

                if(typeof filter === "function" && !filter(item)) {
                    if(elements[item.id]) elements[item.id].hide();
                    continue
                }

                if(elements[item.id]) {
                    elements[item.id].show()
                    continue
                }

                if(item.tags) item.tags = item.tags.split(",");

                let element = elements[item.id] = N({
                    accent: item.accent,
                    inner: [
                        N({
                            class: "appTop",
                            inner: N("span", {
                                innerText: item.displayname//types[item.type]
                            })
                        }),

                        // .darken(16)
                        // .saturation(80)
                        // .substract(20, 20, 20)

                        N({
                            class: "appBody",
                            inner: [
                                item.icon? N({class: "appIconContainer", inner: N("img", {crossOrigin: "Anonymous", loading: "lazy", src: app.cdn + "/file/" + item.icon + (item.icon.endsWith("svg")? "": "?size=120"), onload(){
                                    let override = typeof customColor[item.id] == "string"? [C(customColor[item.id])]: Array.isArray(customColor[item.id])? customColor[item.id].map(color => typeof color == "string"? C(color) : null) : [];
                                    
                                    let color = override[0] || LS.Color.getAverageRGB(this);

                                    element.appColor = color.rgb;
                                    element.style.setProperty("--color-1", (override[1] || color.saturation(80).darken(15)).rgb)
                                    element.style.setProperty("--color-2", element.appColor)
                                    
                                    let isDark = color.isDark;

                                    element.fgColor = (override[2] || (isDark? color.lighten(60).saturation(80): color.darken(20).saturation(50))).rgb;
                                    element.style.setProperty("--color-fg", element.fgColor)
                                    element.style.setProperty("--color-fg-light", color.lighten(60).saturation(25).rgb)
    
                                    element.class(isDark? "appItemDark" : "appItemLight")
                                }})}): "",

                                item.icon? N("br"): "",
        
                                // N("span", {innerText: item.displayname, class: "appName"}),
                                N({innerText: item.description, class: "appDescription"}),
                            ]
                        }),

                        item.tags? N({
                            class: "appBottom",
                            inner: item.tags.map(tag => N("ls-box", {innerText: tag.toUpperCase(), class: "inline appTag"}))
                        }): "",
                    ],

                    class: "appItem",

                    onmouseenter(){
                        updatePopout()
                        cursorPopout.style.setProperty("--accent", element.appColor || "#444")
                        cursorPopout.style.setProperty("--color", element.fgColor || "#fff")
                        cursorPopout.class("active")
                    },

                    onmousemove(){
                        updatePopout()
                    },
                    
                    onmouseleave(){
                        cursorPopout.class("active", 0)
                    }
                });

                function updatePopout(){
                    cursorPopout.style.left = M.x + "px"
                    cursorPopout.style.top = M.y + "px"
                }

                O("#apps-showcase").add(element)
            }
        }

        function fuzz(string){
            return string.toLowerCase().trim().replace(/[\s\n\t\r:|_]/g, "")
        }

        O("#searchInput").on("input", () => {
            let value = fuzz(O("#searchInput").value);

            drawApps(item => {
                return fuzz(item.name).includes(value) || fuzz(item.description).includes(value);
            })
        })

        class NoiseAndTextureNano {
            constructor(canvas, uniforms, vertexShaderSource, fragmentShaderSource){
                const gl = canvas.getContext('webgl', {
                    // preserveDrawingBuffer: true,
                    premultipliedAlpha: false,
                    alpha: true,
                    antialias: true,
                    // precision: 'highp',
                    // powerPreference: 'high-performance'
                });

                this.uniforms = uniforms;
        
                if (!gl) {
                    console.error('WebGL not supported');
                    return;
                }

                let _this = this;

                let qualityReduction = 0;

                Object.defineProperty(this, "qualityReduction", {
                    get(){
                        return qualityReduction
                    },

                    set(value){
                        value = Math.max(0, Math.min(4, value));
                        
                        if(typeof value !== "number" || value === qualityReduction) return;

                        if(qualityReduction < value){
                            console.warn(`WebGL Shader rendering quality reduced due to performance issues, to ${16 - value}`);
                        } else console.log(`WebGL Shader quality reverted to ${16 - value}`)

                        qualityReduction = value

                        // canvas.width = 1024 / (2 ** qualityReduction);
                        // canvas.height = 1024 / (2 ** qualityReduction);
                        canvas.width = 512 - (64 * qualityReduction);
                        canvas.height = 512 - (64 * qualityReduction);
                    }
                })

                canvas.width = 1024;
                canvas.height = 1024;

                this.paused = false;

                function compileShader(gl, source, type) {
                    const shader = gl.createShader(type);
                    gl.shaderSource(shader, source);
                    gl.compileShader(shader);

                    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
                        console.error('Shader compilation error:', gl.getShaderInfoLog(shader));
                        gl.deleteShader(shader);
                        return null;
                    }

                    return shader;
                }
        
                const vertexShader = compileShader(gl, vertexShaderSource, gl.VERTEX_SHADER);
                const fragmentShader = compileShader(gl, fragmentShaderSource, gl.FRAGMENT_SHADER);
        
                const shaderProgram = gl.createProgram();
                gl.attachShader(shaderProgram, vertexShader);
                gl.attachShader(shaderProgram, fragmentShader);
                gl.linkProgram(shaderProgram);
        
                if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {
                    console.error('Shader program linking error:', gl.getProgramInfoLog(shaderProgram));
                    return;
                }
        
                gl.useProgram(shaderProgram);

                const vertices = new Float32Array([
                    -1.0, -1.0,
                    1.0, -1.0,
                    -1.0,  1.0,
                    1.0,  1.0
                ]);
        
                const positionBuffer = gl.createBuffer();
                gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);
                gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);
        
                const positionLocation = gl.getAttribLocation(shaderProgram, 'a_position');
                gl.enableVertexAttribArray(positionLocation);
                gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);

                let uniformLocations = {}, uniformTypes = {};

                for(let uniform in uniforms){
                    uniformLocations[uniform] = gl.getUniformLocation(shaderProgram, uniform);
                    uniformTypes[uniform] = this.getUniformType(uniforms[uniform])
                }

                this.animating = false
        
                let previousTime = 0, frames_since_performance_drop = 0, maxQualityTreshold = 0, bad_frames = 0;

                function render(time) {
                    if(_this.paused) {
                        _this.animating = false
                        return
                    }

                    let delta = time - previousTime;

                    // below ~30 fps, drop quality
                    if(delta > 32) {

                        // give it chance for 4 frames to get back on track

                        if(bad_frames < 4){
                            bad_frames ++
                        } else {
                            _this.qualityReduction ++
                            frames_since_performance_drop = 0
                            bad_frames = 0
                        }

                    } else if(bad_frames > 4) bad_frames --; // allow to gain back some bad reputation

                    else {
                        // Attempt to increase quality again if the performance is good, but if it drops again dont increase 

                        if(_this.qualityReduction > maxQualityTreshold && frames_since_performance_drop > 60 && delta < 20) {
                            _this.qualityReduction --
                            maxQualityTreshold = _this.qualityReduction
                        }
                    }

                    gl.viewport(0, 0, canvas.width, canvas.height);
                    gl.clear(gl.COLOR_BUFFER_BIT);
                    
                    for(let uniform in uniforms) gl[uniformTypes[uniform]](uniformLocations[uniform], ...typeof uniforms[uniform] === "function"? uniforms[uniform](time): uniforms[uniform]);
                    
                    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
                    
                    frames_since_performance_drop ++;
                    previousTime = time;

                    requestAnimationFrame(render);
                }

                this.frame = render
                this.paused = true
            }

            resume(){
                if(!this.paused || this.animating) return;
                this.paused = false
                this.animating = true
                requestAnimationFrame(this.frame);
            }

            getUniformType(value) {
                if(typeof value === "function") value = value(0);

                const len = value.length;

                if (Array.isArray(value[0])) {
                    const subLen = value[0].length;
                    if (len === 1) return `uniform${4}fv`;
                } else return `uniform${len}f`;

                throw new Error("Unknown uniform type.");
            }
        }


        cloudsRenderer = new NoiseAndTextureNano(cloudsCanvas, {
            u_time: time => [time * bgaSpeedFactor],
            u_resolution: () => [cloudsCanvas.width, cloudsCanvas.height],
            // u_mouse: () => [M.x, M.y],
            u_speed: [0.196],
            u_scale: [0],
            u_colors: [[1.0, 1.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0]],
            light: [0.5],
            shadow: [0.5],
            tint: [0.596],
            coverage: [0.276],
            alpha: [1.0]
        }, `attribute vec4 a_position;\nvoid main() { gl_Position = a_position; }`, `#ifdef GL_ES\nprecision mediump float;\n#endif\nuniform vec2 u_resolution,u_mouse;uniform vec4 u_colors[2];uniform float u_speed,u_time,u_scale,light,shadow,tint,coverage,alpha;const mat2 m=mat2(1.6,1.2,-1.2,1.6);vec2 hash(vec2 p){p=vec2(dot(p,vec2(127.1,311.7)),dot(p,vec2(269.5,183.3)));return-1.+2.*fract(sin(p)*43758.5453123);}float noise(vec2 p){vec2 i=floor(p+(p.x+p.y)*.366025404),a=p-i+(i.x+i.y)*.211324865,o=a.x>a.y?vec2(1,0):vec2(0,1),b=a-o+.211324865,c=a-1.+.42264973;vec3 h=max(.5-vec3(dot(a,a),dot(b,b),dot(c,c)),0.);return dot(h*h*h*h*vec3(dot(a,hash(i)),dot(b,hash(i+o)),dot(c,hash(i+1.))),vec3(70));}float fbm(vec2 n){float total=0.,amplitude=.1;for(int i=0;i<7;i++)total+=noise(n)*amplitude,n=m*n,amplitude*=.4;return total;}void main(){vec2 p=gl_FragCoord.xy/u_resolution.xy,uv=p*vec2(u_resolution.x/u_resolution.y,1);float speed=u_speed*.1,time=u_time*speed,scale=1.-u_scale,q=fbm(uv*scale*.5),r=0.;uv=uv*scale-q+time;float weight=.8;for(int i=0;i<8;i++)r+=abs(weight*noise(uv)),uv=m*uv+time,weight*=.7;float f=0.;uv=p*vec2(u_resolution.x/u_resolution.y,1)*scale-q+time;weight=.7;for(int i=0;i<8;i++)f+=weight*noise(uv),uv=m*uv+time,weight*=.6;f*=r+f;float c=0.;time=u_time*speed*2.;uv=p*vec2(u_resolution.x/u_resolution.y,1)*(scale*2.)-q+time;weight=.4;for(int i=0;i<7;i++)c+=weight*noise(uv),uv=m*uv+time,weight*=.6;float c1=0.;time=u_time*speed*3.;uv=p*vec2(u_resolution.x/u_resolution.y,1)*(scale*3.)-q+time;weight=.4;for(int i=0;i<7;i++)c1+=abs(weight*noise(uv)),uv=m*uv+time,weight*=.6;c+=c1;vec4 skycolour=mix(u_colors[1],u_colors[0],p.y),cloudcolour=vec4(1)*clamp(1.-shadow+light*c,0.,1.);f=coverage+20.*alpha*f*r;cloudcolour=mix(skycolour,clamp(tint*skycolour+cloudcolour,0.,1.),clamp(f+c,0.,1.));gl_FragColor=cloudcolour;}`)


        // raysRenderer = new NoiseAndTextureNano(raysCanvas, {
        //     u_time: time => [time * bgaSpeedFactor],
        //     u_colors: [[1, 1, 1, 1, 1, 1, 1, 0]],
        //     u_intensity: [1],
        //     u_rays: [0.094],
        //     u_reach: [0.211],
        //     u_resolution: [1024, 1024]
        // }, `attribute vec4 a_position;\nvoid main() { gl_Position = a_position; }`, `precision highp float;uniform vec2 u_resolution,u_mouse;uniform float u_time;uniform vec4 u_colors[2];uniform float u_intensity,u_rays,u_reach;\n#ifndef FNC_MOD289\n#define FNC_MOD289\n#endif\n#ifndef FNC_PERMUTE\n#define FNC_PERMUTE\n#endif\n#ifndef FNC_TAYLORINVSQRT\n#define FNC_TAYLORINVSQRT\n#endif\n#ifndef FNC_QUINTIC\n#define FNC_QUINTIC \n#endif\n#ifndef FNC_PNOISE\n#define FNC_PNOISE\n#endif\n#ifndef SRGB_EPSILON\n#define SRGB_EPSILON 0.00000001\n#endif\n#ifndef FNC_SRGB2RGB\n#define FNC_SRGB2RGB\nfloat srgb2rgb(float channel){return channel<.04045?channel*.0773993808:pow((channel+.055)*.947867298578199,2.4);}vec3 srgb2rgb(vec3 srgb){return vec3(srgb2rgb(srgb.x+SRGB_EPSILON),srgb2rgb(srgb.y+SRGB_EPSILON),srgb2rgb(srgb.z+SRGB_EPSILON));}vec4 srgb2rgb(vec4 srgb){return vec4(srgb2rgb(srgb.xyz),srgb.w);}\n#endif\n#if!defined(FNC_SATURATE)&&!defined(saturate)\n#define FNC_SATURATE\n#define saturate(x)clamp(x,0.0,1.0)\n#endif\n#ifndef SRGB_EPSILON\n#define SRGB_EPSILON 0.00000001\n#endif\n#ifndef FNC_RGB2SRGB\n#define FNC_RGB2SRGB\nfloat rgb2srgb(float channel){return channel<.0031308?channel*12.92:1.055*pow(channel,.416666666666667)-.055;}vec3 rgb2srgb(vec3 rgb){return saturate(vec3(rgb2srgb(rgb.x-SRGB_EPSILON),rgb2srgb(rgb.y-SRGB_EPSILON),rgb2srgb(rgb.z-SRGB_EPSILON)));}vec4 rgb2srgb(vec4 rgb){return vec4(rgb2srgb(rgb.xyz),rgb.w);}\n#endif\n#ifndef FNC_MIXOKLAB\n#define FNC_MIXOKLAB\nvec3 mixOklab(vec3 colA,vec3 colB,float h){\n#ifdef MIXOKLAB_COLORSPACE_SRGB\ncolA=srgb2rgb(colA);colB=srgb2rgb(colB);\n#endif\nconst mat3 kCONEtoLMS=mat3(.412165612,.211859107,.0883097947,.536275208,.6807189584,.2818474174,.0514575653,.107406579,.6302613616);vec3 lmsA=pow(kCONEtoLMS*colA,vec3(1./3.)),lmsB=pow(kCONEtoLMS*colB,vec3(1./3.)),lms=mix(lmsA,lmsB,h),rgb=lms*lms*lms*mat3(4.0767245293,-1.2681437731,-.0041119885,-3.3072168827,2.6093323231,-.7034763098,.2307590544,-.341134429,1.7068625689);\n#ifdef MIXOKLAB_COLORSPACE_SRGB\nreturn rgb2srgb(rgb);\n#else\nreturn rgb;\n#endif\n}vec4 mixOklab(vec4 colA,vec4 colB,float h){return vec4(mixOklab(colA.xyz,colB.xyz,h),mix(colA.w,colB.w,h));}\n#endif\nfloat rayStrength(vec2 raySource,vec2 rayRefDirection,vec2 coord,float seedA,float seedB,float speed){raySource=coord-raySource;float cosAngle=dot(normalize(raySource),rayRefDirection);return clamp(.45+.15*sin(cosAngle*seedA+u_time*speed)+(.3+.2*cos(-cosAngle*seedB+u_time*speed)),u_reach,1.)*clamp((u_resolution.x-length(raySource))/u_resolution.x,u_reach,1.);}void main(){vec2 uv=gl_FragCoord.xy/u_resolution.xy;uv.y=1.-uv.y;uv=vec2(gl_FragCoord.x,u_resolution.y-gl_FragCoord.y);float speed=u_rays*10.;vec4 fragColor=(vec4(0)+rayStrength(vec2(u_resolution.x*.7,u_resolution.y*-.4),normalize(vec2(1,-.116)),uv,36.2214*speed,21.11349*speed,1.5*speed)*u_colors[0]+(vec4(0)+rayStrength(vec2(u_resolution.x*.8,u_resolution.y*-.6),normalize(vec2(1,.241)),uv,22.3991*speed,18.0234*speed,1.1*speed)*u_colors[1]))*(u_reach-uv.y/u_resolution.y+(.5+u_intensity));gl_FragColor=fragColor;}`)

        raysRenderer = new NoiseAndTextureNano(raysCanvas, {
            u_time: time => [(time * bgaSpeedFactor) + 1000],
            u_resolution: () => [cloudsCanvas.width, cloudsCanvas.height],
            "u_colors": [[0.25098039215686274,0.7529411764705882,0.9058823529411765,1,0.9882352941176471,0.7607843137254902,0.10588235294117647,1,0.9294117647058824,0.4235294117647059,0.18823529411764706,1,0,0,0,0]],
            "u_blur": [0.646],
            "u_animate": [1],
            "u_animate_speed": [1],
            "u_frequency": [0.5]
        }, `attribute vec4 a_position;\nvoid main() { gl_Position = a_position; }`, `precision highp float;\nuniform vec2 u_resolution;\nuniform vec2 u_mouse;\nuniform float u_time;\nuniform vec4 u_colors[4];\nuniform float u_blur;\nuniform bool u_animate;\nuniform float u_animate_speed;\nuniform float u_frequency;\n#define S(a,b,t) smoothstep(a,b,t)\n#ifndef SRGB_EPSILON\n#define SRGB_EPSILON 0.00000001\n#endif\n#ifndef FNC_SRGB2RGB\n#define FNC_SRGB2RGB\nfloat srgb2rgb(float channel) {\nreturn (channel < 0.04045) ? channel * 0.0773993808 : pow((channel + 0.055) * 0.947867298578199,2.4);\n}\nvec3 srgb2rgb(vec3 srgb) {\nreturn vec3(srgb2rgb(srgb.r + SRGB_EPSILON),\nsrgb2rgb(srgb.g + SRGB_EPSILON),srgb2rgb(srgb.b + SRGB_EPSILON));\n}\nvec4 srgb2rgb(vec4 srgb) {\nreturn vec4(srgb2rgb(srgb.rgb),srgb.a);\n}\n#endif\n#if !defined(FNC_SATURATE) && !defined(saturate)\n#define FNC_SATURATE\n#define saturate(x) clamp(x,0.0,1.0)\n#endif\n#ifndef SRGB_EPSILON \n#define SRGB_EPSILON 0.00000001\n#endif\n#ifndef FNC_RGB2SRGB\n#define FNC_RGB2SRGB\nfloat rgb2srgb(float channel) {\nreturn (channel < 0.0031308) ? channel * 12.92 : 1.055 * pow(channel,0.4166666666666667) - 0.055;\n}\nvec3 rgb2srgb(vec3 rgb) {\nreturn saturate(vec3(rgb2srgb(rgb.r - SRGB_EPSILON),rgb2srgb(rgb.g - SRGB_EPSILON),rgb2srgb(rgb.b - SRGB_EPSILON)));\n}\nvec4 rgb2srgb(vec4 rgb) {\nreturn vec4(rgb2srgb(rgb.rgb),rgb.a);\n}\n#endif\n#ifndef FNC_MIXOKLAB\n#define FNC_MIXOKLAB\nvec3 mixOklab( vec3 colA,vec3 colB,float h ) {\n#ifdef MIXOKLAB_COLORSPACE_SRGB\ncolA = srgb2rgb(colA);\ncolB = srgb2rgb(colB);\n#endif\nconst mat3 kCONEtoLMS = mat3(\n0.4121656120,0.2118591070,0.0883097947,\n0.5362752080,0.6807189584,0.2818474174,\n0.0514575653,0.1074065790,0.6302613616);\nconst mat3 kLMStoCONE = mat3(\n4.0767245293,-1.2681437731,-0.0041119885,\n-3.3072168827,2.6093323231,-0.7034763098,\n0.2307590544,-0.3411344290,1.7068625689);\nvec3 lmsA = pow( kCONEtoLMS * colA,vec3(1.0/3.0) );\nvec3 lmsB = pow( kCONEtoLMS * colB,vec3(1.0/3.0) );\nvec3 lms = mix( lmsA,lmsB,h );\nvec3 rgb = kLMStoCONE*(lms*lms*lms);\n#ifdef MIXOKLAB_COLORSPACE_SRGB\nreturn rgb2srgb(rgb);\n#else\nreturn rgb;\n#endif\n}\nvec4 mixOklab( vec4 colA,vec4 colB,float h ) {\nreturn vec4( mixOklab(colA.rgb,colB.rgb,h),mix(colA.a,colB.a,h) );\n}\n#endif\nmat2 Rot(float a)\n{\nfloat s = sin(a);\nfloat c = cos(a);\nreturn mat2(c,-s,s,c);\n}\n// Created by inigo quilez - iq/2014\n// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\nvec2 hash( vec2 p )\n{\np = vec2( dot(p,vec2(2127.1,81.17)),dot(p,vec2(1269.5,283.37)) );\n\treturn fract(sin(p)*43758.5453);\n}\nfloat noise( in vec2 p )\n{\nvec2 i = floor( p );\nvec2 f = fract( p );\n\t\n\tvec2 u = f*f*(3.0-2.0*f);\nfloat n = mix( mix( dot( -1.0+2.0*hash( i + vec2(0.0,0.0) ),f - vec2(0.0,0.0) ),\ndot( -1.0+2.0*hash( i + vec2(1.0,0.0) ),f - vec2(1.0,0.0) ),u.x),\nmix( dot( -1.0+2.0*hash( i + vec2(0.0,1.0) ),f - vec2(0.0,1.0) ),\ndot( -1.0+2.0*hash( i + vec2(1.0,1.0) ),f - vec2(1.0,1.0) ),u.x),u.y);\n\treturn 0.5 + 0.5*n;\n}\nvoid main(){\n\nvec2 uv = gl_FragCoord.xy/u_resolution.xy;\nfloat ratio = u_resolution.x / u_resolution.y;\nvec2 tuv = uv;\ntuv -= .5;\n\n\nfloat speed = u_time * 10. * u_animate_speed;\nif(u_animate == false){\nspeed = 0.0;\n}\nfloat degree = noise(vec2(speed/100.0,tuv.x*tuv.y));\ntuv.y *= 1./ratio;\ntuv *= Rot(radians((degree-.5)*720.+180.));\ntuv.y *= ratio;\n// Wave warp with sin\nfloat frequency = 20. * u_frequency;\nfloat amplitude = 30. * (10.*(0.01+u_blur));\n\ntuv.x += sin(tuv.y*frequency+speed)/amplitude;\n\ttuv.y += sin(tuv.x*frequency*1.5+speed)/(amplitude*.5);\nvec4 layer1 = mixOklab(u_colors[0],u_colors[1],S(-.3,.2,(tuv*Rot(radians(-5.))).x));\nvec4 layer2 = mixOklab(u_colors[2],u_colors[3],S(-.3,.2,(tuv*Rot(radians(-5.))).x));\nvec4 finalComp = mixOklab(layer1,layer2,S(.5,-.3,tuv.y));\ngl_FragColor = finalComp;\n}\n`)
    
        raysRenderer.resume()
    });
</script>